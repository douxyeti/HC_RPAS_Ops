#:kivy 2.3.1

<DashboardScreen>:
    md_bg_color: self.theme_cls.backgroundColor
    
    MDBoxLayout:
        orientation: 'vertical'
        
        # Barre d'outils supérieure
        MDTopAppBar:
            title: "HighCloud RPAS"
            left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
            right_action_items: [["account", lambda x: None], ["logout", lambda x: None]]
            elevation: 2
        
        # Contenu principal
        MDBoxLayout:
            orientation: 'horizontal'
            
            # Navigation Drawer
            MDNavigationDrawer:
                id: nav_drawer
                radius: (0, 16, 16, 0)
                size_hint_x: None
                width: "240dp"
                
                MDNavigationDrawerMenu:
                    
                    MDNavigationDrawerHeader:
                        title: "Menu Principal"
                        text: "Navigation"
                        spacing: "4dp"
                        padding: "12dp", 0, 0, "56dp"
                    
                    MDNavigationDrawerItem:
                        icon: "view-dashboard"
                        text: "Tableau de bord"
                        
                    MDNavigationDrawerItem:
                        icon: "airplane"
                        text: "Drones"
                        
                    MDNavigationDrawerItem:
                        icon: "calendar"
                        text: "Planning"
                        
                    MDNavigationDrawerItem:
                        icon: "account-group"
                        text: "Équipe"
                        
                    MDNavigationDrawerItem:
                        icon: "file-document"
                        text: "Rapports"
                        
                    MDNavigationDrawerItem:
                        icon: "cog"
                        text: "Paramètres"
            
            # Zone de contenu principal
            ScrollView:
                do_scroll: True
                
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: "16dp"
                    spacing: "16dp"
                    size_hint_y: None
                    height: self.minimum_height
                    
                    MDLabel:
                        text: "Bienvenue dans HighCloud RPAS"
                        role: "large"
                        adaptive_height: True
                        size_hint_y: None
                        height: self.texture_size[1]
                    
                    # Rapport de Situation
                    MDCard:
                        style: "elevated"
                        padding: "16dp"
                        size_hint_y: None
                        height: self.minimum_height
                        
                        MDBoxLayout:
                            orientation: 'vertical'
                            spacing: "16dp"
                            adaptive_height: True
                            
                            MDLabel:
                                text: "Rapport de Situation"
                                role: "large"
                                adaptive_height: True
                                size_hint_y: None
                                height: self.texture_size[1]
                            
                            MDGridLayout:
                                cols: 3
                                spacing: "16dp"
                                adaptive_height: True
                                size_hint_y: None
                                height: self.minimum_height
                                
                                # Statistiques Clés
                                MDCard:
                                    style: "outlined"
                                    padding: "12dp"
                                    size_hint: 1, None
                                    height: stats_box.height + self.padding[1] * 2
                                    
                                    MDBoxLayout:
                                        id: stats_box
                                        orientation: 'vertical'
                                        spacing: "8dp"
                                        adaptive_height: True
                                        
                                        MDLabel:
                                            text: "Statistiques Clés"
                                            role: "medium"
                                            adaptive_height: True
                                            
                                        MDLabel:
                                            text: "Drones actifs: 3/5"
                                            adaptive_height: True
                                            
                                        MDLabel:
                                            text: "Vols planifiés: 3"
                                            adaptive_height: True
                                            
                                        MDLabel:
                                            text: "Rapports en attente: 2"
                                            adaptive_height: True
                                
                                # État des Opérations
                                MDCard:
                                    style: "outlined"
                                    padding: "12dp"
                                    size_hint: 1, None
                                    height: ops_box.height + self.padding[1] * 2
                                    
                                    MDBoxLayout:
                                        id: ops_box
                                        orientation: 'vertical'
                                        spacing: "8dp"
                                        adaptive_height: True
                                        
                                        MDLabel:
                                            text: "État des Opérations"
                                            role: "medium"
                                            adaptive_height: True
                                            
                                        MDLabel:
                                            text: "Vols en cours: 1"
                                            adaptive_height: True
                                            
                                        MDLabel:
                                            text: "Météo: Favorable"
                                            adaptive_height: True
                                            
                                        MDLabel:
                                            text: "Alertes: Aucune"
                                            adaptive_height: True
                                
                                # Actions Rapides
                                MDCard:
                                    style: "outlined"
                                    padding: "12dp"
                                    size_hint: 1, None
                                    height: actions_box.height + self.padding[1] * 2
                                    
                                    MDBoxLayout:
                                        id: actions_box
                                        orientation: 'vertical'
                                        spacing: "8dp"
                                        adaptive_height: True
                                        
                                        MDLabel:
                                            text: "Actions Rapides"
                                            role: "medium"
                                            adaptive_height: True
                                        
                                        MDButton:
                                            style: "text"
                                            pos_hint: {"center_x": .5}
                                            adaptive_height: True
                                            
                                            MDButtonText:
                                                text: "Nouveau Rapport"
                                        
                                        MDButton:
                                            style: "text"
                                            pos_hint: {"center_x": .5}
                                            adaptive_height: True
                                            
                                            MDButtonText:
                                                text: "Voir Rapports"
                                        
                                        MDButton:
                                            style: "text"
                                            pos_hint: {"center_x": .5}
                                            adaptive_height: True
                                            
                                            MDButtonText:
                                                text: "Valider Rapports"
                    
                    # Autres sections du dashboard
                    MDGridLayout:
                        cols: 2
                        spacing: "16dp"
                        adaptive_height: True
                        size_hint_y: None
                        height: self.minimum_height
                        
                        # Carte des statistiques détaillées
                        MDCard:
                            style: "elevated"
                            padding: "16dp"
                            size_hint: 1, None
                            height: stats_detail_box.height + self.padding[1] * 2
                            
                            MDBoxLayout:
                                id: stats_detail_box
                                orientation: 'vertical'
                                spacing: "8dp"
                                adaptive_height: True
                                
                                MDLabel:
                                    text: "Statistiques Détaillées"
                                    role: "medium"
                                    adaptive_height: True
                                
                                MDLabel:
                                    text: "Drones en maintenance: 2"
                                    adaptive_height: True
                                
                                MDLabel:
                                    text: "Missions complétées: 15"
                                    adaptive_height: True
                                
                                MDLabel:
                                    text: "Heures de vol total: 45h"
                                    adaptive_height: True
                        
                        # Carte des tâches
                        MDCard:
                            style: "elevated"
                            padding: "16dp"
                            size_hint: 1, None
                            height: tasks_box.height + self.padding[1] * 2
                            
                            MDBoxLayout:
                                id: tasks_box
                                orientation: 'vertical'
                                spacing: "8dp"
                                adaptive_height: True
                                
                                MDLabel:
                                    text: "Tâches à Faire"
                                    role: "medium"
                                    adaptive_height: True
                                
                                MDButton:
                                    style: "text"
                                    pos_hint: {"center_x": .5}
                                    adaptive_height: True
                                    
                                    MDButtonText:
                                        text: "Planifier un vol"
                                
                                MDButton:
                                    style: "text"
                                    pos_hint: {"center_x": .5}
                                    adaptive_height: True
                                    
                                    MDButtonText:
                                        text: "Maintenance drone"
                                
                                MDButton:
                                    style: "text"
                                    pos_hint: {"center_x": .5}
                                    adaptive_height: True
                                    
                                    MDButtonText:
                                        text: "Mise à jour logiciel"
